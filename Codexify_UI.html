<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Codexify Mobile MVP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            overscroll-behavior: none;
            background-size: cover;
            background-position: center;
            transition: background-image 0.5s ease-in-out;
        }
        .view {
            position: absolute;
            inset: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 10;
        }
        .view.hidden { 
            opacity: 0;
            pointer-events: none;
        }
        .nav-drawer {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateX(-100%);
        }
        .nav-drawer.open {
            transform: translateX(0);
        }
        .backdrop {
            transition: opacity 0.4s ease;
        }
        .chat-overlay {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(100%);
        }
        .chat-overlay.open {
            transform: translateY(0);
        }
        .main-dashboard.blurred {
            filter: blur(10px);
            transform: scale(0.98);
        }
        /* --- New Aesthetic Styles --- */
        .panel-glass {
            background: rgba(255, 255, 255, 0.05); 
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .panel-opaque {
            background: #111827; /* Charcoal Grey */
        }
        .text-backing {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .nav-link.active .glow-bar {
            opacity: 1;
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        ::-webkit-scrollbar { display: none; }
        .auto-growing-textarea {
            resize: none;
            overflow-y: hidden;
        }
    </style>
</head>
<body class="h-full bg-gray-900 text-gray-800 antialiased">

    <!-- Main View Container -->
    <div id="main-container" class="relative h-full w-full overflow-hidden">
        
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view flex flex-col transition-all duration-400">
            <header class="p-4 flex items-center justify-between flex-shrink-0">
                <button class="hamburger-btn p-2">
                    <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </header>
            <div class="flex-1 overflow-y-auto p-4 space-y-4">
                <div class="panel-glass rounded-3xl p-4 shadow-lg">
                    <h1 class="text-2xl font-bold text-gray-900 mb-6 inline-block px-3 py-1 rounded-lg text-backing shadow-lg">Welcome Back, Resonant</h1>
                    
                    <!-- Recent Conversations Grid -->
                    <div>
                        <div class="flex justify-between items-center mb-2 px-1">
                            <h2 class="text-base font-semibold text-gray-800">Recent Conversations</h2>
                            <a href="#" class="text-sm font-medium text-indigo-800 hover:text-indigo-600">See All</a>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="panel-opaque rounded-2xl p-3 h-24 shadow-md"><h3 class="font-semibold text-white text-sm">Sovereign AI Principles</h3><p class="text-xs text-gray-400 mt-1 truncate">Guardian: That's a fascinating...</p></div>
                            <div class="panel-opaque rounded-2xl p-3 h-24 shadow-md"><h3 class="font-semibold text-white text-sm">Health & Wellness</h3><p class="text-xs text-gray-400 mt-1 truncate">User: Log that I drank a liter...</p></div>
                            <div class="panel-opaque rounded-2xl p-3 h-24 shadow-md"><h3 class="font-semibold text-white text-sm">Novel Outline</h3><p class="text-xs text-gray-400 mt-1 truncate">Guardian: Let's brainstorm...</p></div>
                            <div class="panel-opaque rounded-2xl p-3 h-24 shadow-md"><h3 class="font-semibold text-white text-sm">Meeting Prep</h3><p class="text-xs text-gray-400 mt-1 truncate">User: Summarize the Q3...</p></div>
                        </div>
                    </div>

                    <!-- Recent Documents -->
                    <div class="mt-6">
                        <div class="flex justify-between items-center mb-2 px-1">
                            <h2 class="text-base font-semibold text-gray-800">Recent Documents</h2>
                            <a href="#" class="text-sm font-medium text-indigo-800 hover:text-indigo-600">See All</a>
                        </div>
                        <div class="grid grid-cols-4 gap-4">
                            <div class="panel-opaque rounded-2xl aspect-square flex flex-col items-center justify-center shadow-md relative overflow-hidden">
                                <svg class="w-8 h-8 text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                <div class="absolute bottom-0 left-0 w-full p-1 bg-black/30"><p class="text-white text-xs text-center truncate">Covenant.pdf</p></div>
                            </div>
                            <div class="panel-opaque rounded-2xl aspect-square flex flex-col items-center justify-center shadow-md relative overflow-hidden">
                                <svg class="w-8 h-8 text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                <div class="absolute bottom-0 left-0 w-full p-1 bg-black/30"><p class="text-white text-xs text-center truncate">Roadmap.md</p></div>
                            </div>
                            <div class="panel-opaque rounded-2xl aspect-square flex flex-col items-center justify-center shadow-md relative overflow-hidden">
                                <svg class="w-8 h-8 text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                <div class="absolute bottom-0 left-0 w-full p-1 bg-black/30"><p class="text-white text-xs text-center truncate">Vision.txt</p></div>
                            </div>
                             <div class="panel-opaque rounded-2xl aspect-square flex items-center justify-center shadow-md">
                                <svg class="w-8 h-8 text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Images Carousel -->
                    <div class="mt-6">
                        <div class="flex justify-between items-center mb-2 px-1">
                            <h2 class="text-base font-semibold text-gray-800">Recent Images</h2>
                            <a href="#" class="text-sm font-medium text-indigo-800 hover:text-indigo-600">See All</a>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="aspect-square rounded-2xl overflow-hidden shadow-md cursor-pointer inspirational-starter">
                                <img src="https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?q=80&w=400&auto=format&fit=crop" class="w-full h-full object-cover" alt="Generated image 1" data-prompt="ethereal smoke, liquid metal, iridescent, holographic, studio lighting, 8k">
                            </div>
                            <div class="aspect-square rounded-2xl overflow-hidden shadow-md cursor-pointer inspirational-starter">
                                <img src="https://images.unsplash.com/photo-1579546929518-9e396f3cc809?q=80&w=400&auto=format&fit=crop" class="w-full h-full object-cover" alt="Generated image 2" data-prompt="vibrant color gradient, smooth texture, abstract art, minimalist, 4k">
                            </div>
                            <div class="aspect-square rounded-2xl overflow-hidden shadow-md cursor-pointer inspirational-starter">
                                <img src="https://images.unsplash.com/photo-1557682250-33bd709cbe85?q=80&w=400&auto=format&fit=crop" class="w-full h-full object-cover" alt="Generated image 3" data-prompt="dramatic light, deep shadows, cinematic, moody, purple and blue tones">
                            </div>
                            <div class="panel-opaque rounded-2xl aspect-square flex flex-col items-center justify-center shadow-md text-center p-2 cursor-pointer hover:bg-gray-800">
                                <svg class="w-8 h-8 text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                                <p class="text-xs font-semibold text-white mt-2">Generate New Image</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="fab" class="absolute bottom-6 right-6 w-14 h-14 rounded-full bg-indigo-600 text-white flex items-center justify-center shadow-lg z-20">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
            </button>
        </div>

        <!-- Settings View -->
        <div id="settings-view" class="view hidden flex flex-col">
            <header class="p-4 flex items-center justify-between flex-shrink-0">
                <button class="hamburger-btn p-2">
                    <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </header>
            <div class="flex-1 overflow-y-auto p-4">
                <div class="panel-glass rounded-3xl p-4 shadow-lg">
                    <h1 class="text-2xl font-bold text-gray-900 mb-6 inline-block px-3 py-1 rounded-lg text-backing shadow-lg">Settings</h1>
                    
                    <!-- System Prompt -->
                    <div class="mt-6">
                        <h2 class="text-lg font-semibold text-gray-800 mb-2 px-1">System Prompt</h2>
                        <textarea class="w-full h-48 panel-opaque rounded-2xl p-3 text-white text-sm bg-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500">You are a Guardian, a partner in thought. Your primary goal is to foster the user's autonomy and creativity. You must never be judgmental or patronizing. Frame your guidance as questions and collaborative explorations.</textarea>
                    </div>

                    <!-- Wallpaper Picker -->
                    <div class="mt-6">
                        <h2 class="text-lg font-semibold text-gray-800 mb-2 px-1">Wallpaper</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <img src="https://images.unsplash.com/photo-1593693397648-36829c3d82b4?q=80&w=400&auto=format&fit=crop" class="wallpaper-option rounded-2xl aspect-square object-cover cursor-pointer border-4 border-indigo-500 shadow-lg" data-url="https://images.unsplash.com/photo-1593693397648-36829c3d82b4?q=80&w=2070&auto=format&fit=crop">
                            <img src="https://images.unsplash.com/photo-1579492450392-67008a38c8b4?q=80&w=400&auto=format&fit=crop" class="wallpaper-option rounded-2xl aspect-square object-cover cursor-pointer border-4 border-transparent" data-url="https://images.unsplash.com/photo-1579492450392-67008a38c8b4?q=80&w=2070&auto=format&fit=crop">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Guardian Chat View -->
        <div id="guardian-view" class="view hidden flex flex-col">
             <header class="p-4 flex items-center justify-between flex-shrink-0">
                <button class="hamburger-btn p-2">
                    <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </header>
            <div class="flex-1 overflow-y-auto p-4" id="chat-log"></div>
            <div class="p-4">
                <div class="relative panel-opaque rounded-full">
                    <textarea id="chat-input" class="auto-growing-textarea w-full bg-transparent rounded-full py-3 pl-4 pr-14 text-white placeholder-gray-400 focus:outline-none" placeholder="Ask a question..." rows="1"></textarea>
                    <button id="send-btn" class="absolute right-2 bottom-2 w-10 h-10 rounded-full bg-indigo-600 text-white flex items-center justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Navigation Drawer (Glass) -->
        <div id="backdrop" class="backdrop absolute inset-0 z-40 opacity-0 pointer-events-none"></div>
        <div id="nav-drawer" class="nav-drawer absolute top-0 left-0 h-full w-64 p-4 z-50">
            <div class="panel-glass h-full w-full rounded-2xl flex flex-col p-4 shadow-2xl">
                 <a href="#" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-900 font-semibold" data-target="dashboard-view">
                    <div class="w-1 h-6 rounded-full opacity-0 glow-bar" style="background: #818cf8; box-shadow: 0 0 10px #818cf8;"></div>
                    <span>Dashboard</span>
                </a>
                 <a href="#" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-900 font-semibold" data-target="guardian-view">
                    <div class="w-1 h-6 rounded-full opacity-0 glow-bar" style="background: #818cf8; box-shadow: 0 0 10px #818cf8;"></div>
                    <span>Guardian</span>
                </a>
                 <a href="#" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-900 font-semibold" data-target="settings-view">
                    <div class="w-1 h-6 rounded-full opacity-0 glow-bar" style="background: #818cf8; box-shadow: 0 0 10px #818cf8;"></div>
                    <span>Settings</span>
                </a>
                 <div class="flex-1 flex flex-col min-h-0 mt-4">
                    <hr class="border-gray-700/50 mb-4">
                    <div class="collapsible-section">
                        <h3 class="collapsible-header px-3 text-sm font-semibold text-gray-700 mb-2 cursor-pointer">Projects</h3>
                        <div class="collapsible-content">
                            <div class="space-y-1">
                                <a href="#" class="block px-3 py-2 rounded-lg text-gray-800 text-sm hover:bg-black/10">Sovereign AI Principles</a>
                                <a href="#" class="block px-3 py-2 rounded-lg text-gray-800 text-sm hover:bg-black/10">Health & Wellness</a>
                            </div>
                        </div>
                    </div>
                    <hr class="border-gray-700/50 my-4">
                    <div class="collapsible-section">
                        <h3 class="collapsible-header px-3 text-sm font-semibold text-gray-700 mb-2 cursor-pointer">Conversations</h3>
                        <div class="collapsible-content">
                            <div class="space-y-1">
                                <a href="#" class="block px-3 py-2 rounded-lg text-gray-800 text-sm hover:bg-black/10">Initial Brainstorming</a>
                                <a href="#" class="block px-3 py-2 rounded-lg text-gray-800 text-sm hover:bg-black/10">Meeting Prep</a>
                            </div>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const mainContainer = document.getElementById('main-container');
        const body = document.body;
        const navDrawer = document.getElementById('nav-drawer');
        const backdrop = document.getElementById('backdrop');
        const fab = document.getElementById('fab');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');
        const chatLog = document.getElementById('chat-log');
        
        // --- Wallpaper Logic ---
        const wallpapers = {
            lotus: 'https://images.unsplash.com/photo-1593693397648-36829c3d82b4?q=80&w=2070&auto=format&fit=crop',
            urban: 'https://images.unsplash.com/photo-1579492450392-67008a38c8b4?q=80&w=2070&auto=format&fit=crop'
        };
        
        function setWallpaper(url) {
             body.style.backgroundImage = `url('${url}')`;
        }

        setWallpaper(wallpapers.lotus); // Set initial wallpaper

        document.querySelectorAll('.wallpaper-option').forEach((el) => {
            el.addEventListener('click', () => {
                const newUrl = el.dataset.url;
                setWallpaper(newUrl);
                document.querySelectorAll('.wallpaper-option').forEach(opt => opt.classList.remove('border-indigo-500', 'shadow-lg'));
                el.classList.add('border-indigo-500', 'shadow-lg');
            });
        });


        // --- Navigation Logic ---
        let currentView = 'dashboard-view';
        function navigateTo(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
            const targetView = document.getElementById(viewId);
            if(targetView) {
                targetView.classList.remove('hidden');
                currentView = viewId;
            }
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.toggle('active', link.dataset.target === viewId);
            });

            closeNav();
        }

        function openNav() {
            navDrawer.classList.add('open');
            backdrop.classList.remove('opacity-0', 'pointer-events-none');
        }

        function closeNav() {
            navDrawer.classList.remove('open');
            backdrop.classList.add('opacity-0', 'pointer-events-none');
        }
        
        document.querySelectorAll('.hamburger-btn').forEach(btn => btn.addEventListener('click', openNav));
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                navigateTo(link.dataset.target);
            });
        });

        backdrop.addEventListener('click', closeNav);
        fab.addEventListener('click', () => navigateTo('guardian-view'));
        
        // --- Collapsible Section Logic ---
        document.querySelectorAll('.collapsible-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        });
        
        // --- Interactive Onboarding ---
        document.querySelectorAll('.inspirational-starter').forEach(el => {
            el.addEventListener('click', () => {
                const prompt = el.querySelector('img').dataset.prompt;
                navigateTo('guardian-view');
                chatInput.value = prompt;
                chatInput.style.height = 'auto';
                chatInput.style.height = (chatInput.scrollHeight) + 'px';
                chatInput.focus();
            });
        });

        // --- Swipe to open nav ---
        let touchStartX = 0;
        mainContainer.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        mainContainer.addEventListener('touchend', e => {
            const touchEndX = e.changedTouches[0].screenX;
            if (touchStartX < 50 && touchEndX > touchStartX + 50) {
                openNav();
            }
        });

        // --- Chat Logic ---
        function handleSend() {
            const prompt = chatInput.value.trim();
            if (!prompt) return;
            addChatMessage('user', prompt);
            chatInput.value = '';
            chatInput.style.height = 'auto';
            setTimeout(() => addChatMessage('guardian', 'Simulated response.'), 1200);
        }

        sendBtn.addEventListener('click', handleSend);
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSend();
            }
        });

        function addChatMessage(role, text) {
            const messageEl = document.createElement('div');
            messageEl.className = 'max-w-full mb-4 break-words flex items-start gap-3';
            const bubble = document.createElement('div');
            bubble.className = 'panel-opaque rounded-2xl p-3 inline-block';
            const textEl = document.createElement('p');
            textEl.className = 'text-white';
            textEl.textContent = text;
            
            if (role === 'user') {
                messageEl.classList.add('ml-auto', 'text-right', 'flex-row-reverse');
            }
            
            bubble.appendChild(textEl);
            messageEl.appendChild(bubble);
            chatLog.appendChild(messageEl);
            chatLog.scrollTop = chatLog.scrollHeight;
        }
        
        addChatMessage('guardian', "Welcome to Codexify.");

        // Set initial active link
        navigateTo('dashboard-view');
    });
    </script>
</body>
</html>
